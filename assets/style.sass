---
---

@import url('http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400')
@import 'ionicons'

+ion-font()

/*
 * vars
 */

$bg: lighten(#20242a, 2%)
$text: #ddd
$litetext: mix($text, $bg, 35%)
$monospace: menlo, monospace
$sans: 'source sans pro', sans-serif
$red: #C0392B
$yellow: #F1C40F
$accent: #2ECC71
$accent2: lighten(#E74C3C, 10%)

$sidebar-width: 200px

/*
 * base
 */

*
  box-sizing: border-box

= antialias
  text-rendering: optimizeLegibility
  -webkit-font-smoothing: antialiased
  -moz-osx-font-smoothing: grayscale

html
  background: $bg

html, input, textarea, td, button
  font-family: $sans
  line-height: 1.5
  font-size: 1em

html, body
  margin: 0
  padding: 0
  height: 100%
  overflow: hidden

body
  font-size: 14px
  color: $text

button
  cursor: pointer
  margin: 0
  padding: 0
  border: 0
  background: transparent
  display: inline-block

button:active,
button:focus
  outline: 0

a, a:visited
  color: #f0f0f0
  text-decoration: none

a:hover, a:focus
  color: white

/*
 * main area
 */

.code-area
  &
    bottom: 0
    position: absolute
    top: 0
    left: 0
    right: $sidebar-width

  .code-toolbar
    position: absolute
    right: 15px
    bottom: -10px
    padding: 15px
    padding-right: 0
    width: 200px
    z-index: 10

/*
 * heh
 */

.main-sidebar
  +antialias()
  background: lighten($bg, 1%)
  box-shadow: 0 0 4px rgba(black, 0.1)
  width: $sidebar-width
  height: 100%
  position: absolute
  top: 0
  right: 0
  padding: 15px

  .bottom
    position: absolute
    bottom: 0
    padding: 15px
    width: 100%
    padding-bottom: 0
    left: 0

  h1, h5
    margin: 0
    padding: 0

  h1
    font-weight: 300
    margin: 0
    font-size: 1.5em
    text-align: center
    border: solid 2px lighten($bg, 5%)
    padding: 30px 10px
    border-radius: 3px
    margin-bottom: 15px
    line-height: 1.2em

  .logo
    // margin: -15px
    // border: solid 2px lighten($bg, 5%)
    // border-radius: 3px
    // border-bottom: solid 1px rgba(black, 0.1)
    display: block
    margin-top: 4px
    height: 40px
    background: url('./logo-alt.svg') -3px center / 85% auto no-repeat

  h5
    font-weight: 400
    font-size: 0.9em
    color: #888

  .section
    margin: 15px 0

.links-list
  &, li
    margin: 0
    padding: 0
    list-style: none

  &
    margin: 15px 0

  a
    display: block
    padding: 5px 15px
    margin-left: -15px
    margin-right: -15px
    color: mix($text, $bg, 50%)
    border-radius: 3px
    font-size: 0.9em
    transition: all 100ms linear

  li
    border-top: solid 1px rgba(white, 0.02)

  &
    border-bottom: solid 1px rgba(white, 0.02)

  a:hover, a:focus
    background: rgba($accent2, 0.03)
    color: white
    &:after
      opacity: 1

  a:active
    background: rgba($accent2, 0.1)
    color: white
    &:after
      opacity: 1

  a:after
    float: right
    font-size: 14px
    margin: 2px 5px 0 0
    color: $accent2

  a.github:after
    +ion-icon('social-github')

  a.coffeescript:after
    +ion-icon('coffee', 16px)

  a.issues:after
    +ion-icon('log-out')

/*
 * each code box
 */

.code-box
  $size: 2px
  $shadow: inset -1px 0 0 rgba(black, 0.1), inset -2px 0 1px rgba(black, 0.05)

  &
    width: 50%
    height: 100%
    position: relative
    float: left
    box-shadow: inset 0 0 0 black, $shadow
    transition: all 100ms linear

  &.left.focus
    box-shadow: inset 0 3px 0 $accent, $shadow

  &.right.focus
    box-shadow: inset 0 3px 0 $accent2, $shadow

  &.focus h3 strong
    color: white

  &.focus.left h3
    border-bottom: solid 1px mix($accent, $bg, 10%)

  &.focus.right h3
    border-bottom: solid 1px mix($accent2, $bg, 10%)

/*
 * common
 */
.code-box, .code-box-popup
  &:not(.focus) .CodeMirror
    opacity: 0.75

  h3
    +antialias()
    position: absolute
    top: 0
    left: 30px
    right: 30px
    padding: 10px 0
    font-size: 0.8em
    border-bottom: solid 1px lighten($bg, 3%)

    strong
      color: mix(white, $bg, 50%)
      font-weight: 300
      text-transform: uppercase
      letter-spacing: 2px

    em
      font-style: normal
      font-weight: 400
      color: mix(white, $bg, 20%)
      margin-left: 10px

  .CodeMirror
    position: absolute
    top: 0
    left: 0
    height: 100%
    width: 100%

    padding: 30px
    padding-top: 70px
    padding-left: 10px

  &.error .CodeMirror
    opacity: 0.2


/*
 * popup
 */

.code-box-popup
  &
    position: absolute
    left: 0
    top: 0
    width: 50%
    height: 100%
    padding: 10px
    transition: transform 250ms ease, opacity 250ms ease
    transform: scale(1) translate(0, 0)
    opacity: 1
    z-index: 10

  &, .CodeMirror, pre
    cursor: default

  &.hide
    transform: scale(0.98) translate(10px, 0)
    pointer-events: none
    opacity: 0

  .close-button
    position: absolute
    top: 0
    right: 0
    width: 64px
    height: 100%
    background: transparent
    border: 0
    padding: 0
    margin: 0
    z-index: 10
    cursor: pointer
    color: mix($accent2, $bg, 50%)
    transition: color 100ms linear

    &:hover
      color: $accent2

    &:before
      +ion-icon('ios-close-outline', 32px)
      position: absolute
      top: 0
      left: 0
      width: 64px
      height: 64px
      line-height: 64px
      text-align: center
      vertical-align: top

    &:hover:before
      @extend %ion-icon-ios-close

  &:not(.focus):not(.error) .CodeMirror
    opacity: 0.9

  .container
    position: absolute
    top: 15px
    left: 15px
    bottom: 15px
    right: 15px
    background: darken($bg, 5%)
    box-shadow: 0 0 4px rgba(black, 0.1)
    z-index: 5
    border-radius: 3px
    border: solid 1px $accent2
    border: solid 1px mix($accent2, $bg, 50%)

  h3
    border-bottom: 0

  h3 strong
    color: $accent2

  h3 em
    color: mix($accent2, $bg, 50%)

  .CodeMirror
    padding-left: 30px
    padding-top: 55px

/*
 * codemirror customization
 */

.CodeMirror
  &
    cursor: text
    transition: opacity 100ms linear
    font-size: 13px

  &.CodeMirror.CodeMirror
    font-family: $monospace
    background: transparent
    box-shadow: none

  .CodeMirror-gutters.CodeMirror-gutters
    background: transparent
    border-right: 0
    box-shadow: none

  .CodeMirror-lint-marker-warning,
  .CodeMirror-lint-marker-error,
  .CodeMirror-lint-marker-multiple
    opacity: 1

  .CodeMirror-lint-marker-error
    background: transparent
    &:before
      +ion-icon('android-cancel', 12px, $top: -2px)
      color: $red

  .CodeMirror-lint-marker-warning
    background: transparent
    &:before
      +ion-icon('android-warning', 12px, $top: -1px)
      color: $yellow

  .CodeMirror-lint-marker-multiple
    opacity: 0

.CodeMirror-lint-tooltip.CodeMirror-lint-tooltip
  font-family: $sans
  padding: 8px 15px
  background: #111
  color: white
  border: 0

  .CodeMirror-lint-message-error,
  .CodeMirror-lint-message-warning
    padding-left: 0
    background: none

  .CodeMirror-lint-message-error:before
    +ion-icon('android-close', 20px, $top: -1px)
    color: $red
    margin-right: 12px
  .CodeMirror-lint-message-warning:before
    +ion-icon('alert', 16px, $top: -1px)
    color: $yellow
    margin-right: 12px

.CodeMirror-overlayscroll-vertical,
.CodeMirror-overlayscroll-horizontal
  div
    opacity: 0
    transition: opacity 100ms linear
    background: lighten($bg, 10%)

.CodeMirror-focused, .CodeMirror:hover
  .CodeMirror-overlayscroll-vertical,
  .CodeMirror-overlayscroll-horizontal
    div
      opacity: 0.5

.CodeMirror-overlayscroll 
  .CodeMirror-scrollbar-filler
    background: transparent

/*
 * Yep
 */

.code-toolbar
  $height: 30px

  &
    background: $bg
    +antialias()
    text-align: right

  .button
    margin-bottom: 10px
    margin-left: 8px
    display: inline-block
    width: 80px
    background: lighten($bg, 0%)
    border: solid 1px lighten($bg, 5%)
    color: lighten($bg, 50%)
    border-radius: 4px
    height: $height
    line-height: $height - 4px
    font-size: 0.9em
    transition: all 100ms linear

  .button:hover
    border-color: transparent
    background: lighten($bg, 15%)
    color: white

  .button:active
    background: $accent
    color: white
    transition: all 0 linear

    &:before
      color: white

  .button:before
    margin-right: 8px
    color: $accent
    font-size: 14px
    position: relative
    top: -1px

  .button.run:before
    +ion-icon('play')

  .button.link:before
    +ion-icon('link')

/*
 *
 */

.section
  &
    color: $litetext

  &:not(:first-child):not(.first)
    border-top: solid 1px rgba($accent, 0.05)
    padding-top: 15px

  h3
    margin: 0
    padding: 0
    text-transform: uppercase
    font-size: 0.8em
    font-weight: normal
    line-height: 1.3
    letter-spacing: 1px

    margin-bottom: 15px

/*
 * link
 */

.code-example
  &
    display: block
    background: lighten($bg, 5%)
    border-bottom: solid 1px rgba(black, 0.2)
    padding: 5px 10px
    color: $text
    border-radius: 3px
    text-align: center
    font-size: 0.9em
    // border: solid 2px lighten($bg, 5%)
    // padding: 5px
    margin: 10px 0 0 0

  &:hover,
  &:focus
    background: lighten($bg, 10%)

  &:active
    background: lighten($bg, 15%)

/*
 *
 */

.checkbox-row
  &
    transition: all 100ms linear
    cursor: pointer
    display: block

  & + &
    margin-top: 5px

  &:hover
    color: $text

  span
    text-transform: uppercase
    letter-spacing: 1px
    font-size: 0.9em
    font-weight: normal

/*
 *
 */

.section.ad-section
  &:last-child
    margin-bottom: 0
  &
    font-size: 0.9em
    line-height: 1.4
    border-top: 0
    background: rgba(black, 0.1)
    margin: 15px -15px
    padding: 15px

  p
    margin: 0
    padding: 0

  p.text
    margin-top: 10px
    text-align: center
    &:first-line
      color: $text

  img
    display: block
    margin: 0 auto
    width: 130px
    height: 100px

.section.share-section:last-child
  border-top: 0
  padding-top: 0
  padding-bottom: 0
  margin-bottom: 10px
